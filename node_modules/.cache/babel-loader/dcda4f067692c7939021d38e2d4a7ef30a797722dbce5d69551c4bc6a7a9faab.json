{"ast":null,"code":"import _slicedToArray from\"D:/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"D:/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"movie\",\"card\",\"dataUserMovies\",\"hendlerMoviesDelete\",\"hendlerMoviesLike\"];import{React,useState,useEffect,useMemo}from'react';import{useLocation}from'react-router-dom';import'./MoviesCard.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var IMG_URL='https://api.nomoreparties.co';function MoviesCard(_ref){var movie=_ref.movie,card=_ref.card,dataUserMovies=_ref.dataUserMovies,hendlerMoviesDelete=_ref.hendlerMoviesDelete,hendlerMoviesLike=_ref.hendlerMoviesLike,props=_objectWithoutProperties(_ref,_excluded);var location=useLocation();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),duration=_useState2[0],setDuratiion=_useState2[1];var showCross=['/saved-movies'].includes(location.pathname);useEffect(function(){timeDuration();},[]);var isLiked=useMemo(function(){return dataUserMovies===null||dataUserMovies===void 0?void 0:dataUserMovies.some(function(i){return i.movieId===movie.id;});},[dataUserMovies,movie]);var moviesLikeButton=\"card__like-heart \".concat(isLiked?'card__like-heart-active':'');function handleLikeClick(evt){evt.target.firstChild?evt.target.firstChild.classList.toggle('card__like-heart-active'):evt.target.classList.toggle('card__like-heart-active');hendlerMoviesLike(props,!isLiked);}function handleDeleteClick(){hendlerMoviesDelete(props);}var timeDuration=function timeDuration(){var hour=Math.floor(props.duration/60)+' ч';if(Math.floor(props.duration/60)===0){hour='';}var min=props.duration%60+' мин';setDuratiion(\"\".concat(hour,\" \").concat(min));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"a\",{href:props.trailerLink,target:\"_blank\",children:/*#__PURE__*/_jsx(\"img\",{className:\"card__afisha\",src:showCross?\"\".concat(props.image):\"\".concat(IMG_URL,\"/\").concat(props.image.url),alt:props.nameRU,preserveAspectRatio:\"xMidYMid slice\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__discription\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card__title\",children:props.nameRU}),showCross?/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleDeleteClick,className:\"card__delete-btn\",children:/*#__PURE__*/_jsx(\"span\",{className:\"card__delete-cross\",children:\"+\"})}):/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleLikeClick,className:\"card__like-btn\",children:/*#__PURE__*/_jsx(\"div\",{className:moviesLikeButton})})]}),/*#__PURE__*/_jsx(\"span\",{className:\"card__duration-film\",children:duration})]})});}export default MoviesCard;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useLocation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","IMG_URL","MoviesCard","_ref","movie","card","dataUserMovies","hendlerMoviesDelete","hendlerMoviesLike","props","_objectWithoutProperties","_excluded","location","_useState","_useState2","_slicedToArray","duration","setDuratiion","showCross","includes","pathname","timeDuration","isLiked","some","i","movieId","id","moviesLikeButton","concat","handleLikeClick","evt","target","firstChild","classList","toggle","handleDeleteClick","hour","Math","floor","min","children","className","href","trailerLink","src","image","url","alt","nameRU","preserveAspectRatio","type","onClick"],"sources":["D:/dev/movies-explorer-frontend/src/components/Movies/MoviesCard/MoviesCard.js"],"sourcesContent":["import { React, useState, useEffect, useMemo } from 'react'\r\nimport { useLocation } from 'react-router-dom';\r\nimport './MoviesCard.css';\r\nconst IMG_URL = 'https://api.nomoreparties.co';\r\n\r\nfunction MoviesCard({ movie, card, dataUserMovies, hendlerMoviesDelete, hendlerMoviesLike, ...props }) {\r\n    const location = useLocation();\r\n    const [duration, setDuratiion] = useState('');\r\n    const showCross = ['/saved-movies'].includes(location.pathname);\r\n\r\n    useEffect(() => {\r\n        timeDuration();\r\n    }, [])\r\n\r\n    const isLiked = useMemo(() => {\r\n        return dataUserMovies?.some((i) => i.movieId === movie.id);\r\n    }, [dataUserMovies, movie])\r\n\r\n    const moviesLikeButton = (\r\n        `card__like-heart ${isLiked ? 'card__like-heart-active' : ''}`\r\n    );\r\n\r\n    function handleLikeClick(evt) {\r\n        evt.target.firstChild\r\n            ? evt.target.firstChild.classList.toggle('card__like-heart-active')\r\n            : evt.target.classList.toggle('card__like-heart-active');\r\n        hendlerMoviesLike(props, !isLiked);\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        hendlerMoviesDelete(props);\r\n    }\r\n\r\n    const timeDuration = () => {\r\n        let hour = Math.floor(props.duration / 60) + ' ч';\r\n        if (Math.floor(props.duration / 60) === 0) {\r\n            hour = '';\r\n        }\r\n        let min = (props.duration % 60) + ' мин';\r\n        setDuratiion(`${hour} ${min}`);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className='card'>\r\n                <a href={props.trailerLink} target=\"_blank\">\r\n                    <img className='card__afisha' src={showCross ? `${props.image}` : `${IMG_URL}/${props.image.url}`} alt={props.nameRU} preserveAspectRatio='xMidYMid slice' />\r\n                </a>\r\n                <div className='card__discription'>\r\n                    <h2 className='card__title'>{props.nameRU}</h2>\r\n                    {\r\n                        showCross\r\n                            ? <button type=\"button\" onClick={handleDeleteClick} className='card__delete-btn'>\r\n                                <span className='card__delete-cross'>+</span>\r\n                            </button>\r\n                            : <button type=\"button\" onClick={handleLikeClick} className='card__like-btn'>\r\n                                <div className={moviesLikeButton}></div>\r\n                            </button>\r\n                    }\r\n                </div>\r\n                <span className='card__duration-film'>{duration}</span>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MoviesCard"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
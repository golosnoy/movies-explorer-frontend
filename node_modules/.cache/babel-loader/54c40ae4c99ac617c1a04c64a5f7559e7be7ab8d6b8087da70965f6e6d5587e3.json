{"ast":null,"code":"import _objectWithoutProperties from\"D:/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"serverResWithError\",\"handleRegister\"];import{userContex}from\"../../../contexts/CurrentUserContext\";import{React,useContext}from'react';import{Navigate}from'react-router-dom';import'./Register.css';import WithForm from'../../WithForm/WithForm';import{useFormWithValidation}from'../../Validate/Validate';import{pattern}from'../../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(_ref){var serverResWithError=_ref.serverResWithError,handleRegister=_ref.handleRegister,props=_objectWithoutProperties(_ref,_excluded);var currentUser=useContext(userContex);var _useFormWithValidatio=useFormWithValidation(),values=_useFormWithValidatio.values,handleChange=_useFormWithValidatio.handleChange,errors=_useFormWithValidatio.errors,isValid=_useFormWithValidatio.isValid;// Обработка регистарицй пользователя\nfunction handleSubmit(evt){evt.preventDefault();if(!values.password){return;}var name=values.name,email=values.email,password=values.password;handleNewRegister(name,email,password);}var handleNewRegister=function handleNewRegister(name,email,password){handleRegister(name,email.toLowerCase(),password);};if(currentUser){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsx(\"section\",{className:\"register\",children:/*#__PURE__*/_jsx(\"div\",{className:\"register__container\",children:/*#__PURE__*/_jsx(WithForm,{className:\"register\",title:\"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C!\",buttonText:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\",authText:\"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B?\",authLinkText:\"\\u0412\\u043E\\u0439\\u0442\\u0438\",authLink:\"/signin\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"register__form\",action:\"formEntrance\",name:\"formEntrance\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"register__inputs\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"register__label\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input register__input_user_name\",value:values.name||'',onChange:handleChange,type:\"text\",id:\"new-user-name\",name:\"name\",minLength:2,maxLength:30,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"register__span \".concat(!errors?\"\":\"register__span_type_input_error\"),children:errors.name}),/*#__PURE__*/_jsx(\"label\",{className:\"register__label\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input register__input_user_email\",value:values.email||'',onChange:handleChange,pattern:pattern,type:\"email\",id:\"new-user-email\",name:\"email\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"register__span \".concat(!errors?\"\":\"register__span_type_input_error\"),children:errors.email}),/*#__PURE__*/_jsx(\"label\",{className:\"register__label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input register__input_user_password\",value:values.password||'',onChange:handleChange,type:\"password\",id:\"new-user-password\",name:\"password\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"register__span \".concat(!errors?\"\":\"register__span_type_input_error\"),children:errors.password})]}),/*#__PURE__*/_jsx(\"span\",{className:\"register__span \".concat(!serverResWithError?\"\":\"register__span_type_register\"),children:serverResWithError.message}),/*#__PURE__*/_jsx(\"button\",{className:\"register__form-btn-sends-register \".concat(isValid?\"register__form-btn-sends-register_active\":\"\"),disabled:!isValid,type:\"submit\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})})})});}export default Register;","map":{"version":3,"names":["userContex","React","useContext","Navigate","WithForm","useFormWithValidation","pattern","jsx","_jsx","jsxs","_jsxs","Register","_ref","serverResWithError","handleRegister","props","_objectWithoutProperties","_excluded","currentUser","_useFormWithValidatio","values","handleChange","errors","isValid","handleSubmit","evt","preventDefault","password","name","email","handleNewRegister","toLowerCase","to","className","children","title","buttonText","authText","authLinkText","authLink","onSubmit","action","value","onChange","type","id","minLength","maxLength","required","concat","message","disabled"],"sources":["D:/dev/movies-explorer-frontend/src/components/Authorization/Register/Register.js"],"sourcesContent":["import { userContex } from \"../../../contexts/CurrentUserContext\";\r\n\r\nimport { React, useContext } from 'react'\r\nimport { Navigate } from 'react-router-dom';\r\nimport './Register.css';\r\nimport WithForm from '../../WithForm/WithForm';\r\nimport { useFormWithValidation } from '../../Validate/Validate';\r\nimport { pattern } from '../../../utils/constants';\r\n\r\nfunction Register({ serverResWithError, handleRegister, ...props }) {\r\n    const currentUser = useContext(userContex);\r\n    const { values, handleChange, errors, isValid } = useFormWithValidation();\r\n\r\n    // Обработка регистарицй пользователя\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n\r\n        if (!values.password) {\r\n            return;\r\n        }\r\n        const { name, email, password } = values;\r\n        handleNewRegister(name, email, password);\r\n    }\r\n\r\n    const handleNewRegister = (name, email, password) => {\r\n        handleRegister(name, email.toLowerCase(), password);\r\n    };\r\n\r\n    if (currentUser) {\r\n        return <Navigate to=\"/\" />\r\n    } return (\r\n        <section className='register'>\r\n            <div className='register__container'>\r\n                <WithForm\r\n                    className='register'\r\n                    title='Добро пожаловать!'\r\n                    buttonText='Зарегистрироваться'\r\n                    authText='Уже зарегистрированы?'\r\n                    authLinkText='Войти'\r\n                    authLink='/signin'\r\n                >\r\n\r\n                    <form\r\n                        onSubmit={handleSubmit}\r\n                        className=\"register__form\"\r\n                        action=\"formEntrance\"\r\n                        name=\"formEntrance\"\r\n                    >\r\n                        <div className='register__inputs'>\r\n                            <label className='register__label'>Имя</label>\r\n                            <input className='register__input register__input_user_name' value={values.name || ''} onChange={handleChange} type='text' id='new-user-name' name='name' minLength={2} maxLength={30} required />\r\n                            <span className={`register__span ${!errors ? \"\" : \"register__span_type_input_error\"}`}\r\n                            >{errors.name}</span>\r\n\r\n                            <label className='register__label'>E-mail</label>\r\n                            <input className='register__input register__input_user_email' value={values.email || ''} onChange={handleChange} pattern={pattern} type='email' id='new-user-email' name='email' required />\r\n                            <span className={`register__span ${!errors ? \"\" : \"register__span_type_input_error\"}`}\r\n                            >{errors.email}</span>\r\n\r\n                            <label className='register__label'>Пароль</label>\r\n                            <input className='register__input register__input_user_password' value={values.password || ''} onChange={handleChange} type='password' id='new-user-password' name='password' required />\r\n                            <span className={`register__span ${!errors ? \"\" : \"register__span_type_input_error\"}`}\r\n                            >{errors.password}</span>\r\n                        </div>\r\n\r\n                        <span\r\n                            className={\r\n                                `register__span ${!serverResWithError\r\n                                    ? \"\"\r\n                                    : \"register__span_type_register\"}`\r\n                            }\r\n                        >\r\n                            {serverResWithError.message}\r\n                        </span>\r\n\r\n                        <button\r\n                            className={`register__form-btn-sends-register ${isValid ? \"register__form-btn-sends-register_active\" : \"\"}`}\r\n                            disabled={!isValid}\r\n                            type='submit'\r\n                        >\r\n                            Зарегистрироваться\r\n                        </button>\r\n                    </form>\r\n                </WithForm>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Register"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
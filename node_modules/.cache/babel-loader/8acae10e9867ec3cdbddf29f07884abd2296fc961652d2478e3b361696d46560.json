{"ast":null,"code":"var _jsxFileName = \"D:\\\\dev\\\\movies-explorer-frontend\\\\src\\\\pages\\\\PageMovies\\\\PageMovies.js\",\n  _s = $RefreshSig$();\nimport { React, useState, useEffect, useCallback } from \"react\";\nimport Layout from \"../../components/Layout/Layout\";\nimport MoviesCard from \"../../components/Movies/MoviesCard/MoviesCard\";\nimport { firstMovies, nextStep } from \"../../utils/constants\";\nimport apiOther from \"../../utils/MoviesApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction PageMovies(props) {\n  _s();\n  var _localStorage$getItem;\n  const [filterString, setFilterString] = useState((_localStorage$getItem = localStorage.getItem(\"filterString\")) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : \"\");\n  const [searchValue, setSearchValue] = useState(filterString);\n  const [showShortOnly, setShowShortOnly] = useState(false);\n  const [moreButton, setMoreButton] = useState(false);\n  const [showMovies, setShowMovies] = useState([]);\n  const [paginator, setPaginator] = useState();\n  const [screenWidth, setScreenWidth] = useState(window.innerWidth);\n  const [showBlockCards, setShowBlockCards] = useState(false);\n  const [showBlockErr, setShowBlockErr] = useState(false);\n  const [getErrorMovies, setGetErrorMovies] = useState(false);\n  const [dataMovies, setDataMovies] = useState([]);\n  const handleResize = useCallback(() => {\n    setScreenWidth(window.innerWidth);\n  }, []);\n  useEffect(() => {\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n  const getMoviesList = () => {\n    props.handleShowPreloader(true);\n    setShowBlockErr(false);\n    setShowBlockCards(true);\n    apiOther.getMoviesList().then(moviesList => {\n      let arrayMovies = moviesList.filter(movie => {\n        if (showShortOnly && movie.duration > 40) {\n          return false;\n        }\n        return movie.nameRU.toLowerCase().includes(filterString) || movie.nameEN.toLowerCase().includes(filterString);\n      });\n      setDataMovies(arrayMovies);\n      if (arrayMovies.length <= 0) {\n        setShowBlockCards(false);\n        setGetErrorMovies(false);\n        setShowBlockErr(true);\n        return;\n      }\n    }).catch(() => {\n      setGetErrorMovies(true);\n      setShowBlockCards(false);\n    }).finally(() => {\n      props.handleShowPreloader(false);\n    });\n  };\n  useEffect(() => {\n    localStorage.setItem(\"filterString\", filterString);\n  }, [filterString]);\n  useEffect(() => {\n    const shortOnly = localStorage.setItem(\"showShortOnly\", showShortOnly);\n    if (shortOnly) {\n      setShowShortOnly(JSON.parse(shortOnly));\n    }\n  }, [showShortOnly]);\n  useEffect(() => {\n    showFirstMovies();\n  }, [dataMovies, screenWidth]);\n  useEffect(() => {\n    setMoreButton(paginator < dataMovies.length);\n  }, [showMovies]);\n  useEffect(() => {\n    getMoviesList();\n  }, [filterString, showShortOnly]);\n  const showFirstMovies = () => {\n    const firstMoviesCount = screenWidth > 1279 ? firstMovies.large : screenWidth > 954 ? firstMovies.medium : screenWidth > 768 ? firstMovies.small : firstMovies.smallest;\n    setPaginator(firstMoviesCount);\n    setShowMovies(dataMovies.slice(0, firstMoviesCount));\n  };\n  const handleSearch = useCallback(query => {\n    setFilterString(query);\n  }, []);\n  const showMoreMovies = () => {\n    const additionalMoviesCount = screenWidth > 1279 ? nextStep.large : screenWidth > 954 ? nextStep.medium : screenWidth > 768 ? nextStep.small : nextStep.smallest;\n    const nextPaginator = paginator + additionalMoviesCount;\n    setShowMovies(dataMovies.slice(0, nextPaginator));\n    setPaginator(nextPaginator);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Layout, {\n      searchValue: searchValue,\n      setSearchValue: setSearchValue,\n      preloader: props.preloader,\n      moviesList: dataMovies,\n      showBlockCards: showBlockCards,\n      showBlockErr: showBlockErr,\n      usersSearchRequest: handleSearch,\n      getErrorMovies: getErrorMovies,\n      showMoreMovies: showMoreMovies,\n      moreButton: moreButton,\n      showShortOnly: showShortOnly,\n      setShowShortOnly: setShowShortOnly,\n      children: showMovies.map(movie => {\n        return /*#__PURE__*/_jsxDEV(MoviesCard, {\n          movie: movie,\n          hendlerMoviesLike: props.hendlerMoviesLike,\n          handleAddPlaceSubmit: props.handleAddPlaceSubmit,\n          dataUserMovies: props.dataUserMovies,\n          ...movie\n        }, movie.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(PageMovies, \"7UnNWnMEj9a2y2U7zmu+eE6w3jc=\");\n_c = PageMovies;\nexport default PageMovies;\nvar _c;\n$RefreshReg$(_c, \"PageMovies\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Layout","MoviesCard","firstMovies","nextStep","apiOther","jsxDEV","_jsxDEV","Fragment","_Fragment","PageMovies","props","_s","_localStorage$getItem","filterString","setFilterString","localStorage","getItem","searchValue","setSearchValue","showShortOnly","setShowShortOnly","moreButton","setMoreButton","showMovies","setShowMovies","paginator","setPaginator","screenWidth","setScreenWidth","window","innerWidth","showBlockCards","setShowBlockCards","showBlockErr","setShowBlockErr","getErrorMovies","setGetErrorMovies","dataMovies","setDataMovies","handleResize","addEventListener","removeEventListener","getMoviesList","handleShowPreloader","then","moviesList","arrayMovies","filter","movie","duration","nameRU","toLowerCase","includes","nameEN","length","catch","finally","setItem","shortOnly","JSON","parse","showFirstMovies","firstMoviesCount","large","medium","small","smallest","slice","handleSearch","query","showMoreMovies","additionalMoviesCount","nextPaginator","children","preloader","usersSearchRequest","map","hendlerMoviesLike","handleAddPlaceSubmit","dataUserMovies","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/dev/movies-explorer-frontend/src/pages/PageMovies/PageMovies.js"],"sourcesContent":["import { React, useState, useEffect, useCallback } from \"react\";\r\nimport Layout from \"../../components/Layout/Layout\";\r\nimport MoviesCard from \"../../components/Movies/MoviesCard/MoviesCard\";\r\nimport { firstMovies, nextStep } from \"../../utils/constants\";\r\nimport apiOther from \"../../utils/MoviesApi\";\r\n\r\nfunction PageMovies(props) {\r\n    const [filterString, setFilterString] = useState(\r\n        localStorage.getItem(\"filterString\") ?? \"\"\r\n    );\r\n    const [searchValue, setSearchValue] = useState(filterString);\r\n    const [showShortOnly, setShowShortOnly] = useState(false);\r\n    const [moreButton, setMoreButton] = useState(false);\r\n    const [showMovies, setShowMovies] = useState([]);\r\n    const [paginator, setPaginator] = useState();\r\n    const [screenWidth, setScreenWidth] = useState(window.innerWidth);\r\n    const [showBlockCards, setShowBlockCards] = useState(false);\r\n    const [showBlockErr, setShowBlockErr] = useState(false);\r\n    const [getErrorMovies, setGetErrorMovies] = useState(false);\r\n    const [dataMovies, setDataMovies] = useState([]);\r\n\r\n    const handleResize = useCallback(() => {\r\n        setScreenWidth(window.innerWidth);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", handleResize);\r\n\r\n        return () => {\r\n            window.removeEventListener(\"resize\", handleResize);\r\n        };\r\n    }, []);\r\n\r\n    const getMoviesList = () => {\r\n        props.handleShowPreloader(true);\r\n        setShowBlockErr(false);\r\n        setShowBlockCards(true);\r\n\r\n        apiOther\r\n            .getMoviesList()\r\n            .then((moviesList) => {\r\n                let arrayMovies = moviesList.filter((movie) => {\r\n                    if (showShortOnly && movie.duration > 40) {\r\n                        return false;\r\n                    }\r\n                    return (\r\n                        movie.nameRU.toLowerCase().includes(filterString) ||\r\n                        movie.nameEN.toLowerCase().includes(filterString)\r\n                    );\r\n                });\r\n\r\n                setDataMovies(arrayMovies);\r\n\r\n                if (arrayMovies.length <= 0) {\r\n                    setShowBlockCards(false);\r\n                    setGetErrorMovies(false);\r\n                    setShowBlockErr(true);\r\n                    return;\r\n                }\r\n            })\r\n            .catch(() => {\r\n                setGetErrorMovies(true);\r\n                setShowBlockCards(false);\r\n            })\r\n            .finally(() => {\r\n                props.handleShowPreloader(false);\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(\"filterString\", filterString);\r\n    }, [filterString]);\r\n\r\n    useEffect(() => {\r\n        const shortOnly = localStorage.setItem(\"showShortOnly\", showShortOnly);\r\n\r\n        if (shortOnly) {\r\n            setShowShortOnly(JSON.parse(shortOnly));\r\n        }\r\n    }, [showShortOnly]);\r\n\r\n    useEffect(() => {\r\n        showFirstMovies();\r\n    }, [dataMovies, screenWidth]);\r\n\r\n    useEffect(() => {\r\n        setMoreButton(paginator < dataMovies.length);\r\n    }, [showMovies]);\r\n\r\n    useEffect(() => {\r\n        getMoviesList();\r\n    }, [filterString, showShortOnly]);\r\n\r\n    const showFirstMovies = () => {\r\n        const firstMoviesCount =\r\n            screenWidth > 1279\r\n                ? firstMovies.large\r\n                : screenWidth > 954\r\n                    ? firstMovies.medium\r\n                    : screenWidth > 768\r\n                        ? firstMovies.small\r\n                        : firstMovies.smallest;\r\n\r\n        setPaginator(firstMoviesCount);\r\n        setShowMovies(dataMovies.slice(0, firstMoviesCount));\r\n    };\r\n\r\n    const handleSearch = useCallback((query) => {\r\n        setFilterString(query);\r\n    }, []);\r\n\r\n    const showMoreMovies = () => {\r\n        const additionalMoviesCount =\r\n            screenWidth > 1279\r\n                ? nextStep.large\r\n                : screenWidth > 954\r\n                    ? nextStep.medium\r\n                    : screenWidth > 768\r\n                        ? nextStep.small\r\n                        : nextStep.smallest;\r\n\r\n        const nextPaginator = paginator + additionalMoviesCount;\r\n        setShowMovies(dataMovies.slice(0, nextPaginator));\r\n        setPaginator(nextPaginator);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Layout\r\n                searchValue={searchValue}\r\n                setSearchValue={setSearchValue}\r\n                preloader={props.preloader}\r\n                moviesList={dataMovies}\r\n                showBlockCards={showBlockCards}\r\n                showBlockErr={showBlockErr}\r\n                usersSearchRequest={handleSearch}\r\n                getErrorMovies={getErrorMovies}\r\n                showMoreMovies={showMoreMovies}\r\n                moreButton={moreButton}\r\n                showShortOnly={showShortOnly}\r\n                setShowShortOnly={setShowShortOnly}\r\n            >\r\n                {showMovies.map((movie) => {\r\n                    return (\r\n                        <MoviesCard\r\n                            movie={movie}\r\n                            hendlerMoviesLike={props.hendlerMoviesLike}\r\n                            handleAddPlaceSubmit={props.handleAddPlaceSubmit}\r\n                            dataUserMovies={props.dataUserMovies}\r\n                            key={movie.id}\r\n                            {...movie}\r\n                        />\r\n                    );\r\n                })}\r\n            </Layout>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default PageMovies;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}